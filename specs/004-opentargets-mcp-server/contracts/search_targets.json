{
  "tool_name": "search_targets",
  "description": "Fuzzy search for gene/protein targets by name, symbol, or description. Returns ranked candidates for resolution. Use this before calling get_target.",
  "parameters": {
    "type": "object",
    "properties": {
      "query": {
        "type": "string",
        "description": "Search term (gene symbol, name, or natural language query). Minimum 2 characters required.",
        "minLength": 2,
        "examples": ["TP53", "BRCA1", "kinase"]
      },
      "slim": {
        "type": "boolean",
        "description": "If true, return only id/approved_symbol/approved_name/score (~20 tokens per entity). Default false returns full candidates.",
        "default": false
      },
      "cursor": {
        "type": ["string", "null"],
        "description": "Opaque cursor for pagination. Pass from previous response for next page.",
        "default": null
      },
      "page_size": {
        "type": "integer",
        "description": "Number of results per page (1-100, default 50).",
        "minimum": 1,
        "maximum": 100,
        "default": 50
      }
    },
    "required": ["query"]
  },
  "returns": {
    "oneOf": [
      {
        "type": "object",
        "description": "PaginationEnvelope with TargetSearchCandidate items",
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "pattern": "^ENSG\\d{11}$",
                  "description": "Ensembl gene ID"
                },
                "approved_symbol": {
                  "type": ["string", "null"],
                  "description": "HGNC approved gene symbol"
                },
                "approved_name": {
                  "type": ["string", "null"],
                  "description": "HGNC approved gene name"
                },
                "score": {
                  "type": "number",
                  "minimum": 0.0,
                  "maximum": 1.0,
                  "description": "Relevance score"
                }
              },
              "required": ["id", "score"]
            }
          },
          "pagination": {
            "type": "object",
            "properties": {
              "cursor": {"type": ["string", "null"]},
              "total_count": {"type": ["integer", "null"]},
              "page_size": {"type": "integer"}
            },
            "required": ["cursor", "page_size"]
          }
        },
        "required": ["items", "pagination"]
      },
      {
        "$ref": "#/components/schemas/ErrorEnvelope"
      }
    ]
  },
  "errors": [
    {
      "code": "AMBIGUOUS_QUERY",
      "condition": "Query too short (<2 characters)",
      "recovery_hint": "Minimum query length is 2 characters"
    },
    {
      "code": "RATE_LIMITED",
      "condition": "Rate limit exceeded (>10 req/s)",
      "recovery_hint": "Wait {backoff_seconds}s before retrying"
    },
    {
      "code": "UPSTREAM_ERROR",
      "condition": "Open Targets GraphQL API unavailable",
      "recovery_hint": "Open Targets API temporarily unavailable - retry in 60 seconds"
    }
  ],
  "examples": [
    {
      "request": {
        "query": "TP53",
        "slim": false,
        "page_size": 10
      },
      "response": {
        "items": [
          {
            "id": "ENSG00000141510",
            "approved_symbol": "TP53",
            "approved_name": "tumor protein p53",
            "score": 1.0
          }
        ],
        "pagination": {
          "cursor": "eyJpbmRleCI6MSwic2l6ZSI6MTB9",
          "total_count": 1,
          "page_size": 10
        }
      }
    }
  ],
  "constitution_compliance": {
    "principle_ii": "Fuzzy search - accepts natural language",
    "principle_iii": "Returns PaginationEnvelope",
    "principle_iv": "Supports slim mode for token budgeting"
  }
}
